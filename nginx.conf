# the events block is required
events{}

http {
    # include the default mime.types to map file extensions to MIME types
    include /etc/nginx/mime.types;

    server {
        client_max_body_size 100M;  # Permite archivos de hasta 100MB
        root /usr/share/nginx/html;
        index index.html;

        # Sirve archivos estáticos directamente
        location / {
            try_files $uri $uri/ /index.html;  # Redirige a index.html si no encuentra el archivo
        }

        # Configuración de caché para archivos estáticos de Angular
        location ~* \.(?:ico|css|js|gif|jpe?g|png|woff2?|ttf|svg)$ {
            expires 1M;
            add_header Cache-Control "public";
            access_log off;
            log_not_found off;
        }



        # Seguridad adicional con cabeceras HTTP
        #add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' https://apis.google.com https://www.google.com https://www.gstatic.com https://api.ipify.org; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self' https://fonts.gstatic.com; frame-src https://www.google.com; frame-ancestors 'self' https://www.google.com; connect-src 'self' https://api.ipify.org;";
        #add_header X-Frame-Options "DENY";
        #add_header X-Content-Type-Options "nosniff";
        #add_header X-XSS-Protection "1; mode=block";
        #add_header Referrer-Policy "no-referrer";
        #add_header Access-Control-Allow-Origin "*";
        #add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
        #add_header Access-Control-Allow-Headers "Content-Type, Authorization";
    }
}
